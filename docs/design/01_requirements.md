# デザイン要件整理

## 1. サイト概要

- **タイトル**: TOHYO通信 ~Vote Communication~
- **目的**: プレゼン・ワークショップなどで、参加者の声を素早く集めて視覚的に共有し、議論を促進する。既存ツールの「リアルタイム性・視認性の弱さ」を解消する。
- **主要ユーザー**: 投票セッションを作成・運営する`開催者`、QRコードから参加する`参加者`。認証なし・ログイン不要で誰でも即時参加できる。
- **利用シーン**: カンファレンスのライブ投票、社内勉強会や研修のアンケート、ワークショップの意思決定、イベントの盛り上げ演出。
- **提供価値 / 体験**: QRコード読み取り → 投票 → グラフが瞬時に更新される“手触り感”。棒グラフ/円グラフ切替や結果閲覧で、参加者も進行に巻き込める。
- **プラットフォーム / デバイス想定**: ブラウザのみで完結。参加者はスマートフォン中心、開催者はPC/大画面表示を前提。縦持ちでも視認性を保ち、横幅がある場合はグラフを大きく表示。
- **差別化ポイント**: SSE + Cloudflare Durable Objects による低遅延なリアルタイム更新、一人一票の簡易制御、サーバーレスでのスケール。

## 2. デザインのゴール

- **一目で状況把握**: プロジェクター投影でも質問文と得票傾向が即座に読めるコントラスト・文字サイズ・余白設計。棒/円グラフ切替時も軸や凡例が明瞭。
- **最短導線の操作**: 開催者は「作成→開始」「終了」「エクスポート」が1〜2タップで迷わず届くレイアウト。参加者は「読む→選ぶ→送る」の3ステップ以内で完了。
- **リアルタイムの手触り感**: SSE更新を感じられる滑らかな値更新・マイクロモーションで、投票が届いた手応えを演出する。
- **モバイルファースト＆レスポンシブ**: 参加者は片手操作（44px以上のタップターゲット、16px以上の本文）、開催者はPC/大画面での視認性を優先したレイアウト。
- **状態とエラーの明快さ**: 投票済み・終了・ネットワークエラーを色/アイコン/短文で即時に伝え、再試行や結果閲覧などの次アクションを常に提示。
- **一貫したブランドトーン**: プライマリカラーを軸にしたシンプルでフラットなUIと広めの余白で、「即席ツール感」を避けつつ軽快さと信頼感を両立する。

## 3. 想定ユーザー

- **開催者（司会・運営スタッフ）**
  - **目的/状況**: イベントや勉強会で質問を即興で投げ、リアルタイムに会場へ結果を映す。準備時間はごく短い。
  - **デバイス**: PC・タブレット（プロジェクター投影前提）、マウス/トラックパッド操作。
  - **課題**: 迷わず作成〜開始まで終えたい、投票終了やエクスポート操作を即座に行いたい。会場後方からも読めるグラフ表示が必要。
  - **成功指標**: 3ステップ以内で投票開始、投票反映の遅延が体感1秒以内、グラフが遠目でも読める。

- **参加者（来場者・聴講者）**
  - **目的/状況**: QRコードから数タップで投票し、結果をすぐに見たい。スマホ縦持ち・片手操作が中心。
  - **デバイス**: スマートフォン（iOS/Android）。通信状況は会場Wi-Fiまたはキャリア回線で不安定な場合あり。
  - **課題**: ログインや入力フォームなしで即参加したい。未選択/終了/既投票などの状態が一目で分かりたい。
  - **成功指標**: ページ到達〜投票完了まで3ステップ以内、未入力エラーで迷わない、投票完了後に結果へ自然に誘導される。

## 4. ページ構成

- **トップ / 投票作成（`/`）**
  - 対象: 開催者。質問文、選択肢入力（動的追加/削除）、投票形式（単一/複数）を設定。
  - 主要アクション: 「投票を作成」→ セッション生成後に開催者ビューへ遷移。未入力/選択肢不足時は即時バリデーション。

- **投票画面（参加者ビュー） `/vote/:sessionId`**
  - 対象: 参加者（スマホ縦持ち前提）。質問表示、選択肢リスト（ラジオ/チェックボックス）、送信ボタン。
  - 状態: 投票可能 / 未選択エラー / 既に投票済み / 投票終了 / セッションなし（404）。投票後は完了メッセージと「結果を見る」導線を提示。

- **結果表示（開催者ビュー） `/vote/:sessionId?view=organizer`**
  - 対象: 開催者（PC・投影前提）。リアルタイムグラフ（棒/円）、総投票数、得票率一覧を表示。
  - 主要アクション: グラフ切替、CSV/JSONエクスポート、投票終了ボタン。QRコード表示で参加者へ配布。

- **結果表示（参加者ビュー） `/vote/:sessionId?view=result`**
  - 対象: 投票済み/終了後の参加者。リアルタイムに更新されるグラフのみをシンプルに表示（操作は最小限）。
  - 状態: 投票終了・セッションなしの場合のメッセージ表示。再投票リンクやホームへの導線は不要（混乱防止）。

- **共通UI / 補助**
  - トースト/バナー: 成功・エラー・終了通知。ネットワークエラー時は再接続案内。
  - モーダル: 投票終了確認、エクスポート実行時の確認（必要な場合のみ）。
  - フッター/ヘッダー: 必要最低限。ブランドロゴ・簡易説明・プライバシー表記程度に留め、投票導線の邪魔をしない。

## 5. 画面遷移

- **開催者フロー**
  1. `/` で質問・選択肢・投票形式を入力し「投票を作成」→ バリデーションOKならセッション生成。
  2. `/vote/:sessionId?view=organizer` へ遷移し、QRコードとリアルタイム結果を表示。
  3. 参加者へQRコードを配布しつつ、グラフ切替・エクスポート・投票終了を随時実行。
  4. 「投票を終了」で新規投票を止める。そのまま結果を表示し続ける。
  5. 必要に応じて新規作成ボタンから `/` に戻り別セッションを開始。

- **参加者フロー**
  1. 開催者のQRコードを読み取り `/vote/:sessionId` へアクセス。
  2. 投票完了後、完了メッセージと「結果を見る」→ `/vote/:sessionId?view=result` へ。
  3. 結果ビューではグラフをリアルタイム更新（SSE）。終了時は終了メッセージを表示。
